webpackJsonp([11],{WBze:function(e,t,i){var a=i("t8a3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i("FIqI")("982da166",a,!0,{})},t8a3:function(e,t,i){(e.exports=i("UTlt")(!0)).push([e.i,"\n.school-item {\r\n  margin-bottom: 1px;\n}\n.school-name {\r\n  font-weight: 700;\n}\r\n","",{version:3,sources:["D:/git/Xlabel2Web/WEB/admin_web/src/views/set/Help.vue"],names:[],mappings:";AACA;EACE,mBAAmB;CACpB;AACD;EACE,iBAAiB;CAClB",file:"Help.vue",sourcesContent:["\n.school-item {\r\n  margin-bottom: 1px;\n}\n.school-name {\r\n  font-weight: 700;\n}\r\n"],sourceRoot:""}])},ubzn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("aA9S"),o=i.n(a),l=i("E4C3"),n=i.n(l),r=i("eOoE");var s={components:{},data:function(){var e=this;return{isShow:!0,isCheck:!1,helpVideo:"",query:{helpName:""},machineList:[],helpKindList:[{value:1,name:"软件使用帮助"},{value:2,name:"硬件使用帮助"}],uploadUrl:this.GLOBAL.prefix+"/admin/upload/uploadImg",uploadVideoUrl:this.GLOBAL.prefix+"/admin/upload/uploadVideo",addEditDialogVisible:!1,dialogImageUrl:"",dialogImgVisible:!1,isEdit:!1,helpLogo:"",page:{pageNumber:1,pageSize:10,total:0},fontUrl:"",helpFileList:[],kindList:[],childList:[],infoForm:{fontUrl:""},rules:{helpKind:[{required:!0,message:"请选择帮助类型",trigger:"blur"}],machineId:[{required:!0,message:"请选择设备型号",trigger:"blur"}],helpName:[{required:!0,message:"请输入帮助名称",trigger:"blur"}],helpVideo:[{required:!0,validator:function(t,i,a){""===i?a(new Error("请上传帮助视频")):void 0!==i||""!==e.infoForm.helpVideo&&void 0!==e.infoForm.helpVideo?a():a(new Error("请上传帮助视频"))},trigger:"change"}],helpLogo:[{required:!0,validator:function(t,i,a){""===i?a(new Error("请上传帮助图标")):void 0!==i||""!==e.infoForm.helpLogo&&void 0!==e.infoForm.helpLogo?a():a(new Error("请上传帮助图标"))},trigger:"change"}]},tableData:[]}},created:function(){},mounted:function(){this.getList(),this.getMachineist()},watch:{addEditDialogVisible:function(e,t){void 0!==this.$refs.infoForm&&this.$refs.infoForm.resetFields()}},computed:{headers:function(){return{xinyeSysUserSessionId:this.$store.state.token}}},methods:{getMachineist:function(){var e=this;Object(r.a)({url:"/admin/set/machine/getMachineList",method:"post"}).then(function(t){e.machineList=t.data.list}).catch(function(t){e.$message.error(t),console.log(t)})},handleCoverSuccess:function(e,t){"200"!==e.code?this.$message.error(e.msg):(this.helpLogo=e.file.url,this.infoForm.helpLogo=e.file.url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,i=e.size/1024/1024<20;return t||this.$message.error("上传图片片只能是 JPG|PNG|IMAGE|JPEG 格式!"),i||this.$message.error("上传图片大小不能超过 20MB!"),t&&i},handleUpload:function(){this.infoForm.helpVideo=""},handleSizeChange:function(e){this.page.pageSize=e,this.getList()},handleCurrentChange:function(e){this.page.pageNumber=e,this.getList()},formatDateJoinAt:function(e,t){return this.$moment(e.joinAt).format("YYYY-MM-DD")},formatDateNextPayAt:function(e,t){return this.$moment(e.nextPayAt).format("YYYY-MM-DD")},handleCoverCardPreview:function(e){this.dialogImageUrl=e,this.dialogImgVisible=!0},handleSearch:function(){this.getList()},handleAdd:function(){this.query.helpName="",this.query.helpKind="",this.query.MachineId="",this.helpLogo="",this.isShow=!1,this.isEdit=!1,this.isCheck=!1,this.infoForm=o()({},null),this.addEditDialogVisible=!0},handleEdit:function(e,t){this.isCheck=!1,this.isShow=!0,this.isEdit=!0,this.infoForm=o()({},t),this.helpLogo=this.infoForm.helpLogo,this.addEditDialogVisible=!0},handleCheck:function(e,t){this.isCheck=!0,this.isEdit=!1,this.isShow=!0,this.helpFileList=[],this.infoForm=o()({},t),this.helpLogo=this.infoForm.helpLogo,this.addEditDialogVisible=!0},handleSubmitSave:function(){var e=this;this.$refs.infoForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){n.a.start();var t,i=o()({},e.infoForm);(t=i,Object(r.a)({url:"/admin/set/help/add",method:"post",data:t})).then(function(t){n.a.done(),e.$message.success(t.data.msg),e.$refs.infoForm.resetFields(),e.addEditDialogVisible=!1,e.getList()})})})},handleSubmitUpdate:function(){var e=this;this.$refs.infoForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){n.a.start();var t,i=o()({},e.infoForm);(t=i,Object(r.a)({url:"/admin/set/help/update",method:"post",data:t})).then(function(t){n.a.done(),e.$message.success(t.data.msg),e.$refs.infoForm.resetFields(),e.addEditDialogVisible=!1,e.getList()})})})},handleRemove:function(e,t){var i=this;this.$confirm("确定删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(e){(function(e){return Object(r.a)({url:"/admin/set/help/del/"+e,method:"get"})})(t.helpId).then(function(e){i.$message.success(e.data.msg),i.getList()}).catch(function(e){i.$message.error(e)})}).catch(function(e){})},handleVideoSuccess:function(e,t){"200"!==e.code?this.$message.error(e.msg):(this.infoForm.helpVideo=e.file.url,this.helpVideo=this.infoForm.helpVideo)},beforeUploadVideo:function(e){var t=e.size/1024/1024<20;return-1===["video/mp4","video/ogg","video/flv","video/avi","video/wmv","video/rmvb"].indexOf(e.type)?(this.$message.error("请上传正确的视频格式"),!1):t?void 0:(this.$message.error("上传视频大小不能超过20MB哦!"),!1)},getList:function(){var e=this;(function(e){return Object(r.a)({url:"/admin/set/help/list",method:"post",data:e})})({helpName:this.query.helpName,machineId:this.query.machineId,helpKind:this.query.helpKind,pageNumber:this.page.pageNumber,pageSize:this.page.pageSize}).then(function(t){e.tableData=t.data.page.list,console.log(e.tableData),e.page.pageNumber=t.data.page.pageNumber,e.page.pageSize=t.data.page.pageSize,e.page.total=t.data.page.totalRow}).catch(function(t){e.$message.error(t),console.log(t)})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-form",{staticClass:"query-form",attrs:{inline:"",model:e.query,"label-position":"right","label-width":"70px"}},[i("el-select",{attrs:{placeholder:"请选择帮助类型"},model:{value:e.query.helpKind,callback:function(t){e.$set(e.query,"helpKind",t)},expression:"query.helpKind"}},[i("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.helpKindList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})],2),e._v(" "),i("el-select",{attrs:{placeholder:"请选择设备型号"},model:{value:e.query.machineId,callback:function(t){e.$set(e.query,"machineId",t)},expression:"query.machineId"}},[i("el-option",{attrs:{value:"",label:"全部"}}),e._v(" "),e._l(e.machineList,function(e){return i("el-option",{key:e.machineId,attrs:{label:e.machineName,value:e.machineId}})})],2),e._v(" "),i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"请输入字体名称"},model:{value:e.query.helpName,callback:function(t){e.$set(e.query,"helpName",t)},expression:"query.helpName"}}),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleSearch}},[e._v("搜索")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增帮助")])],1)],1),e._v(" "),i("el-table",{staticClass:"table",attrs:{data:e.tableData,stripe:"",border:""}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"70"}}),e._v(" "),i("el-table-column",{attrs:{prop:"helpVideo",label:"视频链接","show-overflow-tooltip":!0}}),e._v(" "),i("el-table-column",{attrs:{prop:"machineName",label:"设备类型"}}),e._v(" "),i("el-table-column",{attrs:{prop:"helpKind",label:"帮助类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.helpKind?i("span",[e._v("软件使用帮助")]):e._e(),e._v(" "),2===t.row.helpKind?i("span",[e._v("硬件使用帮助")]):e._e()]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"helpName",label:"帮助名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"helpLogo",label:"帮助图标",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{width:"30px",height:"30px",cursor:"pointer"},attrs:{src:t.row.helpLogo},on:{click:function(i){return e.handleCoverCardPreview(t.row.helpLogo)}}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"添加时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"sysUserName",label:"操作人"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleCheck(t.$index,t.row)}}},[e._v("查看")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleRemove(t.$index,t.row)}}},[e._v("刪除")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.page.pageNumber,"page-sizes":[10,20,30,40],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:"新增/编辑/查看",visible:e.addEditDialogVisible,width:"800px"},on:{"update:visible":function(t){e.addEditDialogVisible=t}}},[i("el-form",{ref:"infoForm",attrs:{model:e.infoForm,rules:e.rules,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"帮助视频上传",prop:"helpVideo"}},[i("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadVideoUrl,"on-success":e.handleVideoSuccess,"before-upload":e.beforeUploadVideo,limit:1,"file-list":e.helpFileList}},[0==e.isCheck?i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleUpload}},[e._v("点击上传")]):e._e(),e._v(" "),0==e.isCheck?i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传视频文件，且不超过20M")]):e._e()],1),e._v(" "),1==e.isShow?i("el-input",{attrs:{disabled:!0},model:{value:e.infoForm.helpVideo,callback:function(t){e.$set(e.infoForm,"helpVideo",t)},expression:"infoForm.helpVideo"}}):e._e()],1),e._v(" "),i("el-form-item",{attrs:{prop:"machineId",label:"设备型号："}},[i("el-select",{attrs:{placeholder:"请选择设备型号",disabled:e.isCheck},model:{value:e.infoForm.machineId,callback:function(t){e.$set(e.infoForm,"machineId",t)},expression:"infoForm.machineId"}},e._l(e.machineList,function(e){return i("el-option",{key:e.machineId,attrs:{label:e.machineName,value:e.machineId}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"helpKind",label:"帮助类型："}},[i("el-select",{attrs:{placeholder:"请选择帮助类型",disabled:e.isCheck},model:{value:e.infoForm.helpKind,callback:function(t){e.$set(e.infoForm,"helpKind",t)},expression:"infoForm.helpKind"}},e._l(e.helpKindList,function(e){return i("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{prop:"helpName",label:"帮助名称:"}},[i("el-input",{attrs:{disabled:e.isCheck},model:{value:e.infoForm.helpName,callback:function(t){e.$set(e.infoForm,"helpName",t)},expression:"infoForm.helpName"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"helpLogo",label:"帮助图标：",disabled:e.isCheck}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleCoverSuccess,"before-upload":e.beforeAvatarUpload}},[e.helpLogo?i("img",{staticClass:"avatar",attrs:{src:e.helpLogo}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.addEditDialogVisible=!1}}},[e._v("关闭")]),e._v(" "),e.isEdit||e.isCheck?e._e():i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitSave}},[e._v("确 定")]),e._v(" "),e.isEdit?i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmitUpdate}},[e._v("更 新")]):e._e()],1)],1),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogImgVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogImgVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var h=i("C7Lr")(s,d,!1,function(e){i("WBze")},null,null);t.default=h.exports}});
//# sourceMappingURL=11.c7fc065bea695d945322.js.map