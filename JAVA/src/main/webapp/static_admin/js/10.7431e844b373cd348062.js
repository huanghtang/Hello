webpackJsonp([10],{"/d0D":function(n,e,t){(n.exports=t("UTlt")(!0)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"BannerList.vue",sourceRoot:""}])},"1KK0":function(n,e,t){var a=t("/d0D");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("FIqI")("2bcd38b4",a,!0,{})},KYHm:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("aA9S"),i=t.n(a),o=t("eOoE");var r={data:function(){var n=this;return{uploadUrl:this.GLOBAL.prefix+"/admin/upload/uploadImg",query:{title:""},addEditDialogVisible:!1,dialogImgVisible:!1,dialogImageUrl:"",isEdit:!1,page:{pageNumber:1,pageSize:10,total:0},cover:"",infoForm:{},rules:{cover:[{required:!0,validator:function(e,t,a){""===t?a(new Error("请上传banner图片")):void 0!==t||""!==n.infoForm.cover&&void 0!==n.infoForm.cover?a():a(new Error("请上传banner图片"))},trigger:"change"}]},tableData:[]}},created:function(){},mounted:function(){this.getList()},methods:{handleSizeChange:function(n){this.page.pageSize=n,this.getList()},handleCoverCardPreview:function(n){this.dialogImageUrl=n,this.dialogImgVisible=!0},handleCurrentChange:function(n){this.pageNumber=n,this.getList()},handleSelectChange:function(n){},listenCoverUploadSuccess:function(n){this.infoForm.cover=n},handleSearch:function(){this.getList()},handleAdd:function(){this.isEdit=!1,this.addEditDialogVisible=!0,this.infoForm=i()({},null)},handleEdit:function(n,e){this.isEdit=!0,this.infoForm=i()({},e),this.infoForm.location&&(this.infoForm.location=this.infoForm.location+""),this.schoolIdList=e.schoolIdList,this.addEditDialogVisible=!0},handleSubmitSave:function(){var n=this;this.$refs.infoForm.validate(function(e){e&&n.$confirm("确认提交吗？","提示",{}).then(function(){var e,t=i()({},n.infoForm);(e=t,Object(o.a)({url:"/admin/database/banner/add",method:"post",data:e})).then(function(e){n.$message.success(e.data.msg),n.$refs.infoForm.resetFields(),n.addEditDialogVisible=!1,n.getList()})})})},handleSubmitUpdate:function(){var n=this;this.$refs.infoForm.validate(function(e){e&&n.$confirm("确认提交吗？","提示",{}).then(function(){var e,t=i()({},n.infoForm);(e=t,Object(o.a)({url:"/admin/database/banner/update",method:"post",data:e})).then(function(e){n.$message.success(e.data.msg),n.$refs.infoForm.resetFields(),n.addEditDialogVisible=!1,n.getList()})})})},handleRemove:function(n,e){var t=this;this.$confirm("确定删除吗？").then(function(n){(function(n){return Object(o.a)({url:"/admin/database/banner/del/"+n,method:"get"})})(e.id).then(function(n){t.$message.success(n.data.msg),t.getList()}).catch(function(n){t.$message.error(n)})}).catch(function(n){})},handleCoverSuccess:function(n,e){"200"!==n.code?this.$message.error(n.msg):(this.cover=n.file.url,this.infoForm.cover=n.file.url)},beforeAvatarUpload:function(n){var e="image/jpeg"===n.type||"image/png"===n.type,t=n.size/1024/1024<20;return e||this.$message.error("上传图片片只能是 JPG|PNG|IMAGE|JPEG 格式!"),t||this.$message.error("上传图片大小不能超过 20MB!"),e&&t},getList:function(){var n=this;(function(n){return Object(o.a)({url:"/admin/database/banner/list",method:"post",data:n})})({pageNumber:this.page.pageNumber,pageSize:this.page.pageSize}).then(function(e){n.tableData=e.data.page.list,n.page.pageNumber=e.data.page.pageNumber,n.page.pageSize=e.data.page.pageSize,n.page.total=e.data.page.totalRow}).catch(function(e){n.$message.error(e),console.log(e)})}}},s={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("el-form",{staticClass:"query-form",attrs:{inline:"",model:n.query,"label-position":"right","label-width":"70px"}},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:n.handleAdd}},[n._v("添加Banner")])],1)],1),n._v(" "),t("el-table",{staticClass:"table",attrs:{data:n.tableData,stripe:"",border:"",width:"600px"}},[t("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),n._v(" "),t("el-table-column",{attrs:{prop:"cover",label:"图片",width:"70"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("img",{staticStyle:{width:"30px",height:"30px",cursor:"pointer"},attrs:{src:e.row.cover},on:{click:function(t){return n.handleCoverCardPreview(e.row.cover)}}})]}}])}),n._v(" "),t("el-table-column",{attrs:{prop:"createTime",label:"上传时间",width:"170"}}),n._v(" "),t("el-table-column",{attrs:{label:"操作",width:"230"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return n.handleEdit(e.$index,e.row)}}},[n._v("编辑")]),n._v(" "),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return n.handleRemove(e.$index,e.row)}}},[n._v("删除")])]}}])})],1),n._v(" "),t("el-pagination",{attrs:{"current-page":n.page.pageNumber,"page-sizes":[10,20,30,40],"page-size":n.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:n.page.total},on:{"size-change":n.handleSizeChange,"current-change":n.handleCurrentChange}}),n._v(" "),t("el-dialog",{attrs:{title:"新增/编辑Banner",visible:n.addEditDialogVisible,width:"600px"},on:{"update:visible":function(e){n.addEditDialogVisible=e}}},[t("el-form",{ref:"infoForm",attrs:{model:n.infoForm,rules:n.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{prop:"cover",label:"图片："}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadUrl,"show-file-list":!1,"on-success":n.handleCoverSuccess,"before-upload":n.beforeAvatarUpload}},[n.cover?t("img",{staticClass:"avatar",attrs:{src:n.cover}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.addEditDialogVisible=!1}}},[n._v("关闭")]),n._v(" "),n.isEdit?t("el-button",{attrs:{type:"primary"},on:{click:n.handleSubmitUpdate}},[n._v("提 交")]):t("el-button",{attrs:{type:"primary"},on:{click:n.handleSubmitSave}},[n._v("确 定")])],1)],1),n._v(" "),t("el-dialog",{attrs:{visible:n.dialogImgVisible,size:"tiny"},on:{"update:visible":function(e){n.dialogImgVisible=e}}},[t("img",{attrs:{width:"100%",src:n.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var l=t("C7Lr")(r,s,!1,function(n){t("1KK0")},null,null);e.default=l.exports}});
//# sourceMappingURL=10.7431e844b373cd348062.js.map